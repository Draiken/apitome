<h2><%= example['resource'] %> API</h2>
<h3><%= example['description'] %></h3>

<%= render partial: 'apitome/docs/explanation',    locals: {explanation: example['explanation']} if example['explanation'] %>
<%= render partial: 'apitome/docs/route',          locals: {method: example['http_method'], url: example['route'], heading: 'h4'} %>
<%= render partial: 'apitome/docs/params',         locals: {params: example['parameters']} if example['parameters'].size > 0 %>

<h4>Examples</h4>
<% example['requests'].each_with_index do |request, index| %>
  <div>
    <h5>Request</h5>
    <div class="request">
      <%= render partial: 'apitome/docs/route',    locals: {method: request['request_method'], url: request['request_path']} %>
      <%= render partial: 'apitome/docs/headers',  locals: {request: request, index: index, headers: request['request_headers']} %>
      <%= render partial: 'apitome/docs/query',    locals: {request: request, index: index} unless request['request_query_parameters'].empty? %>
      <%= render partial: 'apitome/docs/body',     locals: {request: request, index: index, body: request['request_body'], type: request['request_content_type']} if request['request_body'] %>
      <%= render partial: 'apitome/docs/curl',     locals: {request: request, index: index} if request['curl'] %>
    </div>

    <h5>Response</h5>
    <div class="response">
      <%= render partial: 'apitome/docs/status',   locals: {request: request, index: index} %>
      <%= render partial: 'apitome/docs/headers',  locals: {request: request, index: index, headers: request['response_headers']} %>
      <%= render partial: 'apitome/docs/body',     locals: {request: request, index: index, body: request['response_body'], type: request['response_content_type']} if request['response_body'] %>
    </div>
  </div>
<% end %>
